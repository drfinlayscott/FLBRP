PKG_CXXFLAGS = -I../inst/include
PKG_CFLAGS = -I../inst/include
PKG_LIBS = $(SUBLIBS)

MkInclude = $(RHOME)/etc/Makeconf
CFLAGS = -O0 -Wall
CXXFLAGS = -O0 -Wall -fPIC


OBJECTS = FLCoreClasses.o FLBRP.o init.o

SUBDIRS = adolc
SUBLIBS = $(SUBDIRS:=.a)

all: $(SHLIB)
$(SHLIB): sublibs $(OBJECTS)

sublibs:
	@for d in $(SUBDIRS); do \
	  (cd $${d} && CFLAGS="$(CFLAGS)" CXXFLAGS="$(CXXFLAGS)" MkInclude="$(MkInclude)" $(MAKE) library) || exit 1; \
	done
